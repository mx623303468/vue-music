{"version":3,"sources":["webpack:///./node_modules/babel-runtime/helpers/extends.js","webpack:///./src/common/js/song.js","webpack:///src/base/songList/index.vue","webpack:///./src/base/songList/index.vue?f7e4","webpack:///./src/base/songList/index.vue","webpack:///src/components/music-list/index.vue","webpack:///./src/components/music-list/index.vue?db9f","webpack:///./src/components/music-list/index.vue","webpack:///src/components/singer-detail/SingerDetail.vue","webpack:///./src/components/singer-detail/SingerDetail.vue?01a5","webpack:///./src/components/singer-detail/SingerDetail.vue","webpack:///./src/api/singer.js","webpack:///./node_modules/babel-runtime/helpers/classCallCheck.js"],"names":["exports","__esModule","obj","_assign","__webpack_require__","_assign2","default","target","i","arguments","length","source","key","Object","prototype","hasOwnProperty","call","Song","_ref","id","mid","singer","name","album","duration","albumImage","url","classCallCheck_default","this","filename","filterSinger","ret","forEach","ele","push","join","songList","props","songs","type","Array","methods","getDesc","song","base_songList","render","_vm","_h","$createElement","_c","_self","staticClass","_l","domProps","innerHTML","_s","_v","staticRenderFns","src_base_songList","normalizeComponent","ssrContext","music_list","bgImage","String","title","data","scrollY","components","SongScroll","Scroll","SongList","computed","bgStyle","created","probeType","listenScroll","mounted","topBarHeight","$refs","offsetHeight","bgImageHeight","clientHeight","$el","style","top","back","$router","scroll","pos","y","watch","newVal","zIndex","scale","percent","Math","abs","translateY","max","components_music_list","ref","on","click","attrs","probe-type","listen-scroll","SingerDetail","MusicList","music_list_normalizeComponent","extends_default","avatar","vuex_esm","_getSingerDetail","_this","api_singer","then","res","code","config","_normalizeSongs","list","catch","error","console","log","item","musicData","songid","albummid","songmid","songname","albumname","interval","createSong","singer_detail_SingerDetail","class","isShow","SingerDetail_Component","SingerDetail_normalizeComponent","__webpack_exports__","getSingerList","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default","commonParams","channel","page","pagesize","pagenum","hostUin","needNewCode","platform","jsonp","options","getSingerDetail","singerId","loginUin","format","singermid","order","begin","num","songstatus","instance","Constructor","TypeError"],"mappings":"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","file":"static/js/3.df0ed769181d6d492e09.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _assign = require(\"../core-js/object/assign\");\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _assign2.default || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/extends.js\n// module id = Dd8w\n// module chunks = 2 3","// import { getLyric, getSongsUrl } from 'api/song'\r\n// import { ERR_OK } from '@/api/config'\r\n// import { Base64 } from 'js-base64'\r\n\r\nexport default class Song {\r\n  constructor({ id, mid, singer, name, album, duration, albumImage, url }) {\r\n    this.id = id\r\n    this.mid = mid\r\n    this.singer = singer\r\n    this.name = name\r\n    this.album = album\r\n    this.duration = duration\r\n    this.albumImage = albumImage\r\n    this.filename = `C400${this.mid}.m4a`\r\n    this.url = url\r\n  }\r\n\r\n  // getLyric() {\r\n  //   if (this.lyric) {\r\n  //     return Promise.resolve(this.lyric)\r\n  //   }\r\n\r\n  //   return new Promise((resolve, reject) => {\r\n  //     getLyric(this.mid).then(res => {\r\n  //       if (res.retcode === ERR_OK) {\r\n  //         this.lyric = Base64.decode(res.lyric)\r\n  //         resolve(this.lyric)\r\n  //       } else {\r\n  //         // eslint-disable-next-line prefer-promise-reject-errors\r\n  //         reject('no lyric')\r\n  //       }\r\n  //     })\r\n  //   })\r\n  // }\r\n}\r\n\r\nexport const createSong = musicData => {\r\n  return new Song({\r\n    id: musicData.songid,\r\n    mid: musicData.songmid,\r\n    singer: filterSinger(musicData.singer),\r\n    name: musicData.songname,\r\n    album: musicData.albumname,\r\n    duration: musicData.interval,\r\n    albumImage: `https://y.gtimg.cn/music/photo_new/T002R300x300M000${musicData.albummid}.jpg?max_age=2592000`,\r\n    url: ''\r\n    // url: `http://dl.stream.qqmusic.qq.com/C400${musicData.songmid}.m4a?fromtag=38&guid=5931742855&vkey=${songVkey}`\r\n  })\r\n}\r\n\r\nconst filterSinger = singer => {\r\n  let ret = []\r\n  if (!singer) return ''\r\n  singer.forEach(ele => {\r\n    ret.push(ele.name)\r\n  })\r\n  return ret.join('/')\r\n}\r\n\r\n// export function isValidMusic(musicData) {\r\n//   return (\r\n//     musicData.songid &&\r\n//     musicData.albummid &&\r\n//     (!musicData.pay || musicData.pay.payalbumprice === 0)\r\n//   )\r\n// }\r\n\r\n// export function processSongsUrl(songs) {\r\n//   if (!songs.length) {\r\n//     return Promise.resolve(songs)\r\n//   }\r\n//   return getSongsUrl(songs).then(purlMap => {\r\n//     songs = songs.filter(song => {\r\n//       const purl = purlMap[song.mid]\r\n//       if (purl) {\r\n//         song.url =\r\n//           purl.indexOf('http') === -1\r\n//             ? `http://dl.stream.qqmusic.qq.com/${purl}`\r\n//             : purl\r\n//         return true\r\n//       }\r\n//       return false\r\n//     })\r\n//     return songs\r\n//   })\r\n// }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/js/song.js","<template>\r\n  <div class=\"song-list\">\r\n    <ul>\r\n      <li class=\"item\" v-for=\"song in songs\" :key=\"song.id\">\r\n        <div class=\"content\">\r\n          <h2 class=\"name\" v-html=\"song.name\"></h2>\r\n          <p class=\"desc\">{{getDesc(song)}}</p>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    songs: {\r\n      type: Array,\r\n      default: () => []\r\n    }\r\n  },\r\n  methods: {\r\n    getDesc(song) {\r\n      if (!song) {\r\n        return\r\n      }\r\n      return `${song.singer} · ${song.album}`\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\">\r\n@import '~common/styles/mixin';\r\n@import '~common/styles/variable';\r\n\r\n.song-list {\r\n  .item {\r\n    display: flex;\r\n    align-items: center;\r\n    box-sizing: border-box;\r\n    height: 60px;\r\n    font-size: $font-size-14;\r\n\r\n    .content {\r\n      display: flex;\r\n      flex-direction: column;\r\n      overflow: hidden;\r\n\r\n      .name {\r\n        no-wrap();\r\n        color: $color-text-333;\r\n        padding: 1px;\r\n      }\r\n\r\n      .desc {\r\n        no-wrap();\r\n        margin-top: 8px;\r\n        color: $color-text-999;\r\n        padding: 1px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/base/songList/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"song-list\"},[_c('ul',_vm._l((_vm.songs),function(song){return _c('li',{key:song.id,staticClass:\"item\"},[_c('div',{staticClass:\"content\"},[_c('h2',{staticClass:\"name\",domProps:{\"innerHTML\":_vm._s(song.name)}}),_vm._v(\" \"),_c('p',{staticClass:\"desc\"},[_vm._v(_vm._s(_vm.getDesc(song)))])])])}))])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-12cb86cb\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/base/songList/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-12cb86cb\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-12cb86cb\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/base/songList/index.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"music-list\">\r\n    <div class=\"top-bar\" ref=\"top-bar\">\r\n      <i class=\"icon-back\" @click=\"back\"></i>\r\n      <h1 class=\"title-name\" v-html=\"title\"></h1>\r\n    </div>\r\n    <div class=\"bg-image\" :style=\"bgStyle\" ref=\"bgImage\">\r\n      <div class=\"filter\" ref=\"fliter\"></div>\r\n    </div>\r\n    <div class=\"layer\" ref=\"layer\"></div>\r\n    <song-scroll\r\n      :data=\"songs\"\r\n      class=\"song-scroll\"\r\n      ref=\"songScroll\"\r\n      :probe-type=\"probeType\"\r\n      :listen-scroll=\"listenScroll\"\r\n      @scroll=\"scroll\"\r\n    >\r\n      <div class=\"song-list-wrapper\">\r\n        <song-list :songs=\"songs\"></song-list>\r\n      </div>\r\n    </song-scroll>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SongScroll from 'base/scroll/Scroll'\r\nimport SongList from 'base/songList'\r\n\r\nexport default {\r\n  props: {\r\n    bgImage: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    songs: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      scrollY: 0\r\n    }\r\n  },\r\n  components: {\r\n    SongScroll,\r\n    SongList\r\n  },\r\n  computed: {\r\n    bgStyle() {\r\n      return `background-image: url(${this.bgImage})`\r\n    }\r\n  },\r\n  created() {\r\n    this.probeType = 3\r\n    this.listenScroll = true\r\n  },\r\n  mounted() {\r\n    // topbar 高度\r\n    this.topBarHeight = this.$refs['top-bar'].offsetHeight\r\n    // 上部 背景图的高度\r\n    this.bgImageHeight = this.$refs['bgImage'].clientHeight\r\n    this.$refs['songScroll'].$el.style.top = `${this.bgImageHeight + 2}px`\r\n  },\r\n  methods: {\r\n    back() {\r\n      this.$router.back()\r\n    },\r\n    scroll(pos) {\r\n      this.scrollY = pos.y\r\n    }\r\n  },\r\n  watch: {\r\n    scrollY(newVal) {\r\n      let zIndex = 0\r\n      let scale = 1\r\n      let percent = Math.abs(newVal / this.bgImageHeight) // 滚动距离相对背景图片的值\r\n      // let blur = 0\r\n\r\n      // 用背景图的高度减去 topbar 的高度，得出最大可滚动距离，和最新的滚动位置做比较，取最大值。\r\n      let translateY = Math.max(-this.bgImageHeight + this.topBarHeight, newVal)\r\n      this.$refs['layer'].style['transform'] = `translateY(${translateY}px)`\r\n\r\n      // 如果滚动距离大于0 ，则证明为向下滚动，就设置背景图片的 scale 随滚动距离变化。\r\n      if (newVal > 0) {\r\n        scale = 1 + percent\r\n        zIndex = 10\r\n      } else {\r\n        // blur = Math.min(20, 20 * percent)\r\n      }\r\n      // this.$refs['filter'].style['fliter'] = `blur(${blur}px)`\r\n\r\n      // 如果向上滚动的距离小于 背景图片减去topbar的高度，图片高度就等于topbar的高度，并设置 z-index 保证覆盖滚动列表，否则就设置回原本的样式大小\r\n      if (newVal < -this.bgImageHeight + this.topBarHeight) {\r\n        zIndex = 10\r\n        this.$refs['bgImage'].style['height'] = `${this.topBarHeight}px`\r\n        this.$refs['bgImage'].style['paddingTop'] = 0\r\n      } else {\r\n        this.$refs['bgImage'].style['height'] = 0\r\n        this.$refs['bgImage'].style['paddingTop'] = `70%`\r\n      }\r\n      this.$refs.bgImage.style['transform'] = `scale(${scale})`\r\n      this.$refs['bgImage'].style['zIndex'] = zIndex\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n@import '~common/styles/mixin.styl';\r\n@import '~common/styles/variable.styl';\r\n\r\n.music-list {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: $color-background-f4f4f4;\r\n\r\n  .top-bar {\r\n    z-index: 100;\r\n    display: flex;\r\n    align-items: center;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    height: 40px;\r\n    line-height: 40px;\r\n    padding: 0 10px;\r\n    font-size: 20px;\r\n\r\n    & > i {\r\n      position: absolute;\r\n      width: 30px;\r\n      line-height: 40px;\r\n      text-align: center;\r\n      color: $color-qq-theme = #31c27c;\r\n    }\r\n\r\n    .title-name {\r\n      no-wrap();\r\n      flex: 1;\r\n      text-align: center;\r\n      font-weight: 500;\r\n      color: $color-text-fff;\r\n      text-shadow: 1px 1px 5px #666;\r\n    }\r\n  }\r\n\r\n  .bg-image {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 0;\r\n    padding-top: 70%;\r\n    background-size: cover;\r\n    transform-origin: top;\r\n    // transition: all 0.3s;\r\n    background-color: #666;\r\n\r\n    .filter {\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      right: 0;\r\n      bottom: 0;\r\n      background-color: rgba(0, 0, 0, 0.35);\r\n    }\r\n  }\r\n\r\n  .layer {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: $color-background-f4f4f4;\r\n  }\r\n\r\n  .song-scroll {\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n    // overflow: hidden;\r\n    padding-top: 10px;\r\n    padding-bottom: 10px;\r\n\r\n    .song-list-wrapper {\r\n      padding-left: 15px;\r\n      padding-right: 15px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/music-list/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"music-list\"},[_c('div',{ref:\"top-bar\",staticClass:\"top-bar\"},[_c('i',{staticClass:\"icon-back\",on:{\"click\":_vm.back}}),_vm._v(\" \"),_c('h1',{staticClass:\"title-name\",domProps:{\"innerHTML\":_vm._s(_vm.title)}})]),_vm._v(\" \"),_c('div',{ref:\"bgImage\",staticClass:\"bg-image\",style:(_vm.bgStyle)},[_c('div',{ref:\"fliter\",staticClass:\"filter\"})]),_vm._v(\" \"),_c('div',{ref:\"layer\",staticClass:\"layer\"}),_vm._v(\" \"),_c('song-scroll',{ref:\"songScroll\",staticClass:\"song-scroll\",attrs:{\"data\":_vm.songs,\"probe-type\":_vm.probeType,\"listen-scroll\":_vm.listenScroll},on:{\"scroll\":_vm.scroll}},[_c('div',{staticClass:\"song-list-wrapper\"},[_c('song-list',{attrs:{\"songs\":_vm.songs}})],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-79ee4e72\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/music-list/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-79ee4e72\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-79ee4e72\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-79ee4e72\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/music-list/index.vue\n// module id = null\n// module chunks = ","<template>\r\n  <transition name=\"singer-detail-slide\">\r\n    <music-list :class=\"{isShow: !singer.id}\" :songs=\"songs\" :title=\"title\" :bgImage=\"bgImage\"></music-list>\r\n  </transition>\r\n</template>\r\n\r\n<script type=\"text/javascript\">\r\nimport { mapGetters } from 'vuex'\r\nimport { getSingerDetail } from 'api/singer'\r\nimport { createSong } from 'common/js/song'\r\nimport { ERR_OK } from 'api/config'\r\nimport MusicList from 'components/music-list'\r\n\r\nexport default {\r\n  components: {\r\n    MusicList\r\n  },\r\n  data() {\r\n    return {\r\n      songs: []\r\n    }\r\n  },\r\n  computed: {\r\n    title() {\r\n      return this.singer.name\r\n    },\r\n    bgImage() {\r\n      return this.singer.avatar\r\n    },\r\n    ...mapGetters(['singer'])\r\n  },\r\n  created() {\r\n    this._getSingerDetail()\r\n  },\r\n  methods: {\r\n    _getSingerDetail() {\r\n      if (!this.singer.id) {\r\n        this.$router.push('/singer')\r\n        return\r\n      }\r\n      getSingerDetail(this.singer.id)\r\n        .then(res => {\r\n          if (res.code === ERR_OK) {\r\n            this.songs = this._normalizeSongs(res.data.list)\r\n            // console.log('this.songs', this.songs)\r\n            // processSongsUrl(this._normalizeSongs(res.data.list)).then(songs => {\r\n            //   console.log(songs)\r\n            //   this.songs = songs\r\n            // })\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.log(error)\r\n        })\r\n    },\r\n    _normalizeSongs(list) {\r\n      let ret = []\r\n      list.forEach(item => {\r\n        let { musicData } = item\r\n        // console.log('musicData', musicData)\r\n\r\n        if (musicData.songid && musicData.albummid) {\r\n          ret.push(createSong(musicData))\r\n        }\r\n      })\r\n      return ret\r\n    }\r\n    // _normalizeSongs(list) {\r\n    //   let ret = []\r\n    //   list.forEach(item => {\r\n    //     let { musicData } = item\r\n    //     if (isValidMusic(musicData)) {\r\n    //       ret.push(createSong(musicData))\r\n    //     }\r\n    //   })\r\n    //   return ret\r\n    // }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n@import '~common/styles/variable';\r\n\r\n.isShow {\r\n  opacity: 0;\r\n}\r\n\r\n.singer-detail-slide-enter-active, .singer-detail-slide-leave-active {\r\n  transition: all 0.3s linear;\r\n}\r\n\r\n.singer-detail-slide-enter, .singer-detail-slide-leave-to {\r\n  transform: translate3d(100%, 0, 0);\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/singer-detail/SingerDetail.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"singer-detail-slide\"}},[_c('music-list',{class:{isShow: !_vm.singer.id},attrs:{\"songs\":_vm.songs,\"title\":_vm.title,\"bgImage\":_vm.bgImage}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-cc87b794\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/singer-detail/SingerDetail.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-cc87b794\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./SingerDetail.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SingerDetail.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SingerDetail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-cc87b794\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./SingerDetail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-cc87b794\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/singer-detail/SingerDetail.vue\n// module id = null\n// module chunks = ","import jsonp from 'common/js/jsonp'\r\nimport { commonParams, options } from './config'\r\n\r\nexport const getSingerList = () => {\r\n  const url = 'https://c.y.qq.com/v8/fcg-bin/v8.fcg'\r\n  const data = Object.assign({}, commonParams, {\r\n    channel: 'singer',\r\n    page: 'list',\r\n    key: 'all_all_all',\r\n    pagesize: 100,\r\n    pagenum: 1,\r\n    hostUin: 0,\r\n    needNewCode: 0,\r\n    platform: 'yqq'\r\n  })\r\n\r\n  return jsonp(url, data, options)\r\n}\r\n\r\nexport const getSingerDetail = singerId => {\r\n  const url = 'https://c.y.qq.com/v8/fcg-bin/fcg_v8_singer_track_cp.fcg'\r\n  const data = Object.assign({}, commonParams, {\r\n    loginUin: 0,\r\n    hostUin: 0,\r\n    format: 'jsonp',\r\n    platform: 'yqq',\r\n    needNewCode: 0,\r\n    singermid: singerId,\r\n    order: 'listen',\r\n    begin: 0,\r\n    num: 30,\r\n    songstatus: 1\r\n  })\r\n\r\n  return jsonp(url, data, options)\r\n}\r\n\r\n// export const getSongVkey = songmid => {\r\n//   const url = 'https://c.y.qq.com/base/fcgi-bin/fcg_music_express_mobile3.fcg'\r\n//   const data = Object.assign(\r\n//     {},\r\n//     {\r\n//       callback: 'musicJsonCallback',\r\n//       loginUin: 0,\r\n//       format: 'jsonp',\r\n//       platform: 'yqq',\r\n//       needNewCode: 0,\r\n//       cid: 205361747,\r\n//       uin: 3051522991,\r\n//       guid: 5931742855,\r\n//       songmid: songmid,\r\n//       filename: `C400${songmid}.m4a`\r\n//     }\r\n//   )\r\n//   return jsonp(url, data, options)\r\n// }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/singer.js","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/classCallCheck.js\n// module id = Zrlr\n// module chunks = 2 3"],"sourceRoot":""}