{"version":3,"sources":["webpack:///./node_modules/babel-runtime/helpers/extends.js","webpack:///./src/common/js/singer.js","webpack:///src/base/listView/ListView.vue","webpack:///./src/base/listView/ListView.vue?1e13","webpack:///./src/base/listView/ListView.vue","webpack:///src/components/singer/Singer.vue","webpack:///./src/components/singer/Singer.vue?4911","webpack:///./src/components/singer/Singer.vue","webpack:///src/base/loading/Loading.vue","webpack:///./src/base/loading/Loading.vue?0fd2","webpack:///./src/base/loading/Loading.vue","webpack:///./src/api/singer.js","webpack:///./node_modules/babel-runtime/helpers/classCallCheck.js"],"names":["exports","__esModule","obj","_assign","__webpack_require__","_assign2","default","target","i","arguments","length","source","key","Object","prototype","hasOwnProperty","call","Singer","_ref","id","name","classCallCheck_default","this","avatar","ListView","data","touches","listHeight","currentIndex","scrollY","diff","props","type","Array","computed","shortcutList","map","item","title","substr","fixedTitle","watch","_this","setTimeout","_calculateHeight","newY","originHeight","endHeight","newVal","fixedTop","$refs","fixed","style","transform","components","scroll","Scroll","loading","Loading","created","_this2","listenScroll","probeType","methods","selectItem","singer","$emit","onShortcutTouchStart","index","clickFirstTouch","window","event","pageY","stratTouch","stratIndex","_scrollToElement","onShortcutTouchMove","e","moveFirstTouch","endTouch","moveLength","anchorIndex","parseInt","listview","scrollToElement","listGroup","list","clientHeight","h","push","pos","y","listView_ListView","render","_vm","_h","$createElement","_c","_self","ref","staticClass","attrs","on","_l","refInFor","_v","_s","click","$event","directives","rawName","value","expression","alt","touchmove","stopPropagation","preventDefault","class","current","touchstart","staticRenderFns","components_singer_Singer","singerList","normalizeComponent","ssrContext","_getsingerList","extends_default","gotoSingerDetail","$router","path","setSinger","api_singer","then","res","code","config","_normalizeSingerList","catch","error","console","log","hot","singers","forEach","ele","js_singer","Fsinger_name","Fsinger_mid","Findex","ret","match","sort","a","b","charCodeAt","concat","vuex_esm","selectortype_template_index_0_src_components_singer_Singer","Singer_Component","Singer_normalizeComponent","__webpack_exports__","String","loading_Loading","width","height","src","Component","getSingerList","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default","commonParams","channel","page","pagesize","pagenum","hostUin","needNewCode","platform","jsonp","options","getSingerDetail","singerId","loginUin","format","singermid","order","begin","num","songstatus","instance","Constructor","TypeError"],"mappings":"oDAEAA,EAAAC,YAAA,EAEA,IAIAC,EAJAC,EAAcC,EAAQ,QAEtBC,GAEAH,EAFAC,IAEsCD,EAAAD,WAAAC,GAAuCI,QAAAJ,GAE7EF,EAAAM,QAAAD,EAAAC,SAAA,SAAAC,GACA,QAAAC,EAAA,EAAiBA,EAAAC,UAAAC,OAAsBF,IAAA,CACvC,IAAAG,EAAAF,UAAAD,GAEA,QAAAI,KAAAD,EACAE,OAAAC,UAAAC,eAAAC,KAAAL,EAAAC,KACAL,EAAAK,GAAAD,EAAAC,IAKA,OAAAL,yKClBqBU,EACnB,SAAAA,EAAAC,GAA0B,IAAZC,EAAYD,EAAZC,GAAIC,EAAQF,EAARE,KAAQC,IAAAC,KAAAL,GACxBK,KAAKH,GAAKA,EACVG,KAAKF,KAAOA,EACZE,KAAKC,OAAL,sDAAoEJ,EAApE,gDC2CJK,GACAC,KADA,WAEA,OACAC,WACAC,cACAC,aAAA,EACAC,SAAA,EACAC,MAAA,IAGAC,OACAN,MACAO,KAAAC,MACA3B,QAAA,uBAGA4B,UACAC,aADA,WAEA,OAAAb,KAAAG,KAAAW,IAAA,SAAAC,GACA,OAAAA,EAAAC,MAAAC,OAAA,QAGAC,WANA,WAOA,OAAAlB,KAAAO,QAAA,EACA,GAEAP,KAAAG,KAAAH,KAAAM,cACAN,KAAAG,KAAAH,KAAAM,cAAAU,MACA,KAGAG,OACAhB,KADA,WACA,IAAAiB,EAAApB,KACAqB,WAAA,WACAD,EAAAE,oBACA,KAEAf,QANA,SAMAgB,GACA,IAAAlB,EAAAL,KAAAK,WAGA,GAAAkB,EAAA,EACAvB,KAAAM,aAAA,MADA,CAMA,QAAApB,EAAA,EAAAA,EAAAmB,EAAAjB,OAAA,EAAAF,IAAA,CACA,IAAAsC,EAAAnB,EAAAnB,GACAuC,EAAApB,EAAAnB,EAAA,GAEA,IAAAqC,GAAAC,IAAAD,EAAAE,EAGA,OAFAzB,KAAAM,aAAApB,OACAc,KAAAQ,KAAAiB,EAAAF,GAMAvB,KAAAM,aAAAD,EAAAjB,OAAA,IAEAoB,KA9BA,SA8BAkB,GAEA,IAAAC,EACAD,EAAA,GAAAA,EAlEA,GAkEAA,EAlEA,GAkEA,EAKA1B,KAAA4B,MAAAC,MAAAC,MAAAC,UAAA,kBAAAJ,EAAA,WAGAK,YACAC,OAAAC,EAAA,EACAC,QAAAC,EAAA,GAEAC,QA5EA,WA4EA,IAAAC,EAAAtC,KAEAA,KAAAuC,cAAA,EAEAvC,KAAAwC,UAAA,EACAnB,WAAA,WAEAiB,EAAAhB,oBACA,KAEAmB,SAEAC,WAFA,SAEAC,GACA3C,KAAA4C,MAAA,aAAAD,IAGAE,qBANA,SAMAC,GAEA,IAEAC,EAFAC,OAAAC,MAEA7C,QAAA,GAAA8C,MAEAlD,KAAAI,QAAA+C,WAAAJ,EACA/C,KAAAI,QAAAgD,WAAAN,EAGA9C,KAAAqD,iBAAAP,GAGA9C,KAAAM,aAAAwC,GAEAQ,oBArBA,SAqBAC,GAEA,IAAAC,EAAAD,EAAAnD,QAAA,GACAJ,KAAAI,QAAAqD,SAAAD,EAAAN,MAEA,IAAAQ,GACA1D,KAAAI,QAAAqD,SAAAzD,KAAAI,QAAA+C,YApHA,GAoHA,EAEAQ,EAAAC,SAAA5D,KAAAI,QAAAgD,YAAAM,EAEA1D,KAAAqD,iBAAAM,GAGAA,EAAA,EACA3D,KAAAM,aAAA,EACAqD,EAAA3D,KAAAK,WAAAjB,OAAA,EACAY,KAAAM,aAAAN,KAAAK,WAAAjB,OAAA,EAEAY,KAAAM,aAAAqD,GAIAN,iBA3CA,SA2CAP,GACA9C,KAAA4B,MAAAiC,SAAAC,gBAAA9D,KAAA4B,MAAAmC,UAAAjB,GAAA,IAEAxB,iBA9CA,WA+CAtB,KAAAK,cACA,IAAA2D,KACAhE,KAAA4B,MAAAmC,YACAC,EAAAhE,KAAA4B,MAAAmC,UAAAjD,IAAA,SAAAC,GACA,OAAAA,EAAAkD,gBAGA,IAAAC,EAAA,EACAlE,KAAAK,WAAA8D,KAAAD,GAEA,QAAAhF,EAAA,EAAAA,EAAA8E,EAAA5E,OAAAF,IACAgF,GAAAF,EAAA9E,GACAc,KAAAK,WAAA8D,KAAAD,IAGAjC,OA9DA,SA8DAmC,GACApE,KAAAO,QAAA6D,EAAAC,KCpMeC,GADEC,OAFjB,WAA0B,IAAAC,EAAAxE,KAAayE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,UAAoBE,IAAA,WAAAC,YAAA,YAAAC,OAA8C5E,KAAAqE,EAAArE,KAAAoC,aAAAiC,EAAAjC,aAAAC,UAAAgC,EAAAhC,WAA0EwC,IAAK/C,OAAAuC,EAAAvC,UAAqB0C,EAAA,KAAAH,EAAAS,GAAAT,EAAA,cAAAzD,GAA2C,OAAA4D,EAAA,MAAgBrF,IAAAyB,EAAAC,MAAA6D,IAAA,YAAAK,UAAA,EAAAJ,YAAA,eAAsEH,EAAA,MAAWG,YAAA,qBAA+BN,EAAAW,GAAAX,EAAAY,GAAArE,EAAAC,UAAAwD,EAAAW,GAAA,KAAAR,EAAA,KAAAH,EAAAS,GAAAlE,EAAA,iBAAA4B,GAA0F,OAAAgC,EAAA,MAAgBrF,IAAAqD,EAAA9C,GAAAiF,YAAA,kBAAAE,IAAgDK,MAAA,SAAAC,GAAyBd,EAAA9B,WAAAC,OAAyBgC,EAAA,OAAYY,aAAazF,KAAA,OAAA0F,QAAA,SAAAC,MAAA9C,EAAA,OAAA+C,WAAA,kBAA8EZ,YAAA,SAAAC,OAA8BY,IAAA,QAAYnB,EAAAW,GAAA,KAAAR,EAAA,QAAyBG,YAAA,SAAmBN,EAAAW,GAAAX,EAAAY,GAAAzC,EAAA7C,mBAAuC0E,EAAAW,GAAA,KAAAR,EAAA,OAAyBG,YAAA,kBAA4BH,EAAA,MAAWK,IAAIY,UAAA,SAAAN,GAA8E,OAAjDA,EAAAO,kBAAyBP,EAAAQ,iBAAwBtB,EAAAlB,oBAAAgC,MAAyCd,EAAAS,GAAAT,EAAA,sBAAAzD,EAAA+B,GAAgD,OAAA6B,EAAA,MAAgBrF,IAAAwD,EAAAgC,YAAA,OAAAiB,OAAoCC,QAAAxB,EAAAlE,eAAAwC,GAAoCkC,IAAKiB,WAAA,SAAAX,GAA8Bd,EAAA3B,qBAAAC,OAAkC0B,EAAAW,GAAAX,EAAAY,GAAArE,WAAyByD,EAAAW,GAAA,KAAAR,EAAA,OAA2BY,aAAazF,KAAA,OAAA0F,QAAA,SAAAC,MAAAjB,EAAA,WAAAkB,WAAA,eAA4Eb,IAAA,QAAAC,YAAA,0BAAkDH,EAAA,MAAWG,YAAA,qBAA+BN,EAAAW,GAAAX,EAAAY,GAAAZ,EAAAtD,iBAAAsD,EAAAW,GAAA,KAAAR,EAAA,WAA+DY,aAAazF,KAAA,OAAA0F,QAAA,SAAAC,OAAAjB,EAAArE,KAAAf,OAAAsG,WAAA,oBAAkF,IAExlDQ,oBCCjB,ICWAC,GACAhG,KADA,WAEA,OACAiG,gBAGApE,YACA9B,SDlByBpB,EAAQ,OAcjCuH,CACEnG,EACAoE,GATF,EAVA,SAAAgC,GACExH,EAAQ,SAaV,kBAEA,MAUgC,SCHhCuD,QATA,WAUArC,KAAAuG,kBAEA9D,QAAW+D,KAEXC,iBAFA,SAEA9D,GACA3C,KAAA0G,QAAAvC,MACAwC,KAAA,WAAAhE,EAAA9C,KAEAG,KAAA4G,UAAAjE,IAEA4D,eARA,WAQA,IAAAnF,EAAApB,KACMT,OAAAsH,EAAA,EAAAtH,GACNuH,KAAA,SAAAC,GACAA,EAAAC,OAAAC,EAAA,IACA7F,EAAAgF,WAAAhF,EAAA8F,qBAAAH,EAAA5G,KAAA6D,SAGAmD,MAAA,SAAAC,GACAC,QAAAC,IAAAF,MAIAF,qBApBA,SAoBAlD,GAEA,IAAAlD,GACAyG,KACAvG,MJlDwB,KImDxBwG,aAKAxD,EAAAyD,QAAA,SAAAC,EAAA5E,GAEAA,EJzDiC,II0DjChC,EAAAyG,IAAAC,QAAArD,KACA,IAAAwD,GACA7H,KAAA4H,EAAAE,aACA/H,GAAA6H,EAAAG,eAKA,IAAAvI,EAAAoI,EAAAI,OACAhH,EAAAxB,KACAwB,EAAAxB,IACA0B,MAAA1B,EACAkI,aAGA1G,EAAAxB,GAAAkI,QAAArD,KACA,IAAAwD,GACA7H,KAAA4H,EAAAE,aACA/H,GAAA6H,EAAAG,iBAMA,IAAAE,KACAR,KAGA,QAAAjI,KAAAwB,EAAA,CACA,IAAA6B,EAAA7B,EAAAxB,GACAqD,EAAA3B,MAAAgH,MAAA,YACAD,EAAA5D,KAAAxB,GJ1FwB,OI2FxBA,EAAA3B,OACAuG,EAAApD,KAAAxB,GASA,OAJAoF,EAAAE,KAAA,SAAAC,EAAAC,GACA,OAAAD,EAAAlH,MAAAoH,WAAA,GAAAD,EAAAnH,MAAAoH,WAAA,KAGAb,EAAAc,OAAAN,KAEAxI,OAAA+I,EAAA,EAAA/I,EACAqH,UAAA,iBCrGe2B,GADEhE,OAFP,WAAgB,IAAaE,EAAbzE,KAAa0E,eAA0BC,EAAvC3E,KAAuC4E,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBG,YAAA,WAAqBH,EAAA,aAAkBI,OAAO5E,KAA9HH,KAA8HoG,YAAsBpB,IAAKtC,WAAzJ1C,KAAyJyG,oBAAzJzG,KAA4LmF,GAAA,KAAAR,EAAA,oBAEtLuB,oBCChC,IAcIsC,EAdqB1J,EAAQ,OAcjB2J,CACdtC,EACAoC,GAT6B,EAV/B,SAAoBjC,GAClBxH,EAAQ,SAaS,kBAEU,MAUd4J,EAAA,QAAAF,EAAiB,gEClBhC,IAAApG,GACA3B,OACAO,OACAN,KAAAiI,OACA3J,QAAA,aCTe4J,GADErE,OAFjB,WAA0B,IAAaE,EAAbzE,KAAa0E,eAA0BC,EAAvC3E,KAAuC4E,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBG,YAAA,YAAsBH,EAAA,OAAYI,OAAO8D,MAAA,KAAAC,OAAA,KAAAC,IAAiCjK,EAAQ,QAA2B6G,IAAA,aAA7L3F,KAAgNmF,GAAA,KAAAR,EAAA,KAAsBG,YAAA,SAAtO9E,KAAyPmF,GAAzPnF,KAAyPoF,GAAzPpF,KAAyPgB,aAElQkF,oBCCjB,IAcA8C,EAdyBlK,EAAQ,OAcjCuH,CACEjE,EACAwG,GATF,EAVA,SAAAtC,GACExH,EAAQ,SAaV,kBAEA,MAUe4J,EAAA,EAAAM,EAAiB,8JCvBnBC,EAAgB,WAC3B,IACM9I,EAAO+I,OAAkBC,KAC7BC,QAAS,SACTC,KAAM,OACN/J,IAAK,cACLgK,SAAU,IACVC,QAAS,EACTC,QAAS,EACTC,YAAa,EACbC,SAAU,QAGZ,OAAOC,YAZK,uCAYMxJ,EAAMyJ,MAGbC,EAAkB,SAAAC,GAC7B,IACM3J,EAAO+I,OAAkBC,KAC7BY,SAAU,EACVP,QAAS,EACTQ,OAAQ,QACRN,SAAU,MACVD,YAAa,EACbQ,UAAWH,EACXI,MAAO,SACPC,MAAO,EACPC,IAAK,GACLC,WAAY,IAGd,OAAOV,YAdK,2DAcMxJ,EAAMyJ,gEChC1BlL,EAAAC,YAAA,EAEAD,EAAAM,QAAA,SAAAsL,EAAAC,GACA,KAAAD,aAAAC,GACA,UAAAC,UAAA","file":"static/js/2.091eedd4fc0ca96fb168.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _assign = require(\"../core-js/object/assign\");\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _assign2.default || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/extends.js\n// module id = Dd8w\n// module chunks = 2 3","export const HOT_NAME = '热门'\r\nexport const HOT_SINGER_LENGTH = 10\r\n\r\nexport default class Singer {\r\n  constructor({ id, name }) {\r\n    this.id = id\r\n    this.name = name\r\n    this.avatar = `https://y.gtimg.cn/music/photo_new/T001R300x300M000${id}.jpg?max_age=2592000`\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/js/singer.js","<template>\r\n  <scroll\r\n    class=\"list-view\"\r\n    :data=\"data\"\r\n    ref=\"listview\"\r\n    :listenScroll=\"listenScroll\"\r\n    :probeType=\"probeType\"\r\n    @scroll=\"scroll\"\r\n  >\r\n    <ul>\r\n      <li class=\"list-group\" v-for=\"item in data\" :key=\"item.title\" ref=\"listGroup\">\r\n        <h2 class=\"list-group-title\">{{item.title}}</h2>\r\n        <ul>\r\n          <li\r\n            class=\"list-group-item\"\r\n            v-for=\"singer in item.singers\"\r\n            :key=\"singer.id\"\r\n            @click=\"selectItem(singer)\"\r\n          >\r\n            <img class=\"avatar\" v-lazy=\"singer.avatar\" alt=\"歌手\" />\r\n            <span class=\"name\">{{singer.name}}</span>\r\n          </li>\r\n        </ul>\r\n      </li>\r\n    </ul>\r\n    <div class=\"shortcut-list\">\r\n      <ul @touchmove.stop.prevent=\"onShortcutTouchMove\">\r\n        <li\r\n          v-for=\"(item, index) in shortcutList\"\r\n          :key=\"index\"\r\n          class=\"item\"\r\n          :class=\"{current: currentIndex === index}\"\r\n          @touchstart=\"onShortcutTouchStart(index)\"\r\n        >{{item}}</li>\r\n      </ul>\r\n    </div>\r\n    <div class=\"list-fixed-title-warp\" v-show=\"fixedTitle\" ref=\"fixed\">\r\n      <h2 class=\"list-fixed-title\">{{fixedTitle}}</h2>\r\n    </div>\r\n    <loading v-show=\"!data.length\"></loading>\r\n  </scroll>\r\n</template>\r\n\r\n<script type=\"text/javascript\">\r\nimport scroll from 'base/scroll/Scroll'\r\nimport loading from 'base/loading/Loading'\r\n\r\nconst ANCHOR_HEIGHT = 16\r\nconst TITLE_HEIGHT = 40\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      touches: {},\r\n      listHeight: [],\r\n      currentIndex: 0,\r\n      scrollY: -1,\r\n      diff: -1\r\n    }\r\n  },\r\n  props: {\r\n    data: {\r\n      type: Array,\r\n      default: () => []\r\n    }\r\n  },\r\n  computed: {\r\n    shortcutList() {\r\n      return this.data.map(item => {\r\n        return item.title.substr(0, 1)\r\n      })\r\n    },\r\n    fixedTitle() {\r\n      if (this.scrollY > 0) {\r\n        return ''\r\n      }\r\n      return this.data[this.currentIndex]\r\n        ? this.data[this.currentIndex].title\r\n        : ''\r\n    }\r\n  },\r\n  watch: {\r\n    data() {\r\n      setTimeout(() => {\r\n        this._calculateHeight()\r\n      }, 20)\r\n    },\r\n    scrollY(newY) {\r\n      const listHeight = this.listHeight\r\n\r\n      // 当滚动到顶部时， newY > 0\r\n      if (newY > 0) {\r\n        this.currentIndex = 0\r\n        return\r\n      }\r\n\r\n      // 在中间部分\r\n      for (let i = 0; i < listHeight.length - 1; i++) {\r\n        let originHeight = listHeight[i]\r\n        let endHeight = listHeight[i + 1]\r\n\r\n        if (-newY >= originHeight && -newY < endHeight) {\r\n          this.currentIndex = i\r\n          this.diff = endHeight + newY\r\n          return\r\n        }\r\n      }\r\n\r\n      // 当滚到底部时，且 -newY 大于最后一个元素的底部 clientHeight\r\n      this.currentIndex = listHeight.length - 2\r\n    },\r\n    diff(newVal) {\r\n      // 监测下一个标题的位置 离顶部标题的距离，如果大于 0，并且小于顶部标题的高度时，顶部标题就同步向上偏移\r\n      let fixedTop =\r\n        newVal > 0 && newVal < TITLE_HEIGHT ? newVal - TITLE_HEIGHT : 0\r\n\r\n      // if (this.fixedTop === fixedTop) return\r\n      // this.fixedTop = fixedTop\r\n\r\n      this.$refs.fixed.style.transform = `translate3d(0, ${fixedTop}px, 0)`\r\n    }\r\n  },\r\n  components: {\r\n    scroll,\r\n    loading\r\n  },\r\n  created() {\r\n    // 是否监控 scroll 事件\r\n    this.listenScroll = true\r\n    // 获得滚动位置的时机\r\n    this.probeType = 3\r\n    setTimeout(() => {\r\n      // 计算 listHeight 的高度\r\n      this._calculateHeight()\r\n    }, 20)\r\n  },\r\n  methods: {\r\n    // 派发列表项点击事件\r\n    selectItem(singer) {\r\n      this.$emit('selectItem', singer)\r\n    },\r\n    // 手指触碰事件方法\r\n    onShortcutTouchStart(index) {\r\n      // 获得事件对象\r\n      let e = window.event\r\n      // 获得当前被触碰的 DOM元素的 pageY\r\n      let clickFirstTouch = e.touches[0].pageY\r\n      // 保存当前 pageY, index 到全局对象 touches 中，便于 touchMove事件调用\r\n      this.touches.stratTouch = clickFirstTouch\r\n      this.touches.stratIndex = index\r\n\r\n      // 调用滚动方法，传入 index，滚动到指定 DOM 元素的位置\r\n      this._scrollToElement(index)\r\n\r\n      // 改变 currentIndex 更改样式\r\n      this.currentIndex = index\r\n    },\r\n    onShortcutTouchMove(e) {\r\n      // 获得事件对象，并保存 pageY 到全局对象 touches 中\r\n      let moveFirstTouch = e.touches[0]\r\n      this.touches.endTouch = moveFirstTouch.pageY\r\n      // 初始位置 减 滑动距离 除以 DOM 元素高度, 计算出滑动了几个 DOM 节点，并进行向下取整，保存到 moveLength\r\n      let moveLength =\r\n        ((this.touches.endTouch - this.touches.stratTouch) / ANCHOR_HEIGHT) | 0\r\n      // 初始节点的 index 加上 计算出的滑动了几个节点，得到需要滚动到第几个 DOM节点位置\r\n      let anchorIndex = parseInt(this.touches.stratIndex) + moveLength\r\n      // 调用滚动方法，传入 index，滚动到指定 DOM 元素的位置\r\n      this._scrollToElement(anchorIndex)\r\n\r\n      // // 改变 currentIndex 更改样式\r\n      if (anchorIndex < 0) {\r\n        this.currentIndex = 0\r\n      } else if (anchorIndex > this.listHeight.length - 2) {\r\n        this.currentIndex = this.listHeight.length - 2\r\n      } else {\r\n        this.currentIndex = anchorIndex\r\n      }\r\n    },\r\n    // 对 better-scroll 的 scrollToElement 方法进行封装, 方便调用， 精简代码， 易于维护。\r\n    _scrollToElement(index) {\r\n      this.$refs.listview.scrollToElement(this.$refs.listGroup[index], 0)\r\n    },\r\n    _calculateHeight() {\r\n      this.listHeight = []\r\n      let list = []\r\n      if (this.$refs.listGroup) {\r\n        list = this.$refs.listGroup.map(item => {\r\n          return item.clientHeight\r\n        })\r\n      }\r\n      let h = 0\r\n      this.listHeight.push(h)\r\n\r\n      for (let i = 0; i < list.length; i++) {\r\n        h += list[i]\r\n        this.listHeight.push(h)\r\n      }\r\n    },\r\n    scroll(pos) {\r\n      this.scrollY = pos.y\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n@import '~common/styles/variable';\r\n\r\n.list-view {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n\r\n  .list-group {\r\n    padding-bottom: 30px;\r\n\r\n    .list-group-title {\r\n      height: 30px;\r\n      line-height: 30px;\r\n      padding: 5px 0 5px 20px;\r\n      box-shadow: 0 1px 0 #eee;\r\n      color: $color-qq-theme;\r\n      font-size: $font-size-18 = 18px;\r\n      background-color: $color-background-f7f7f7;\r\n    }\r\n\r\n    .list-group-item {\r\n      display: flex;\r\n      align-items: center;\r\n      padding: 20px 0 0 30px;\r\n\r\n      .avatar {\r\n        width: 50px;\r\n        height: 50px;\r\n        border-radius: 50%;\r\n      }\r\n\r\n      .name {\r\n        margin-left: 20px;\r\n        font-size: $font-size-16 = 16px;\r\n        color: $color-text-333;\r\n      }\r\n    }\r\n  }\r\n\r\n  .shortcut-list {\r\n    position: absolute;\r\n    right: 0;\r\n    top: 50%;\r\n    transform: translateY(-50%);\r\n    text-align: center;\r\n    width: 20px;\r\n    font-family: Helvetica;\r\n\r\n    .item {\r\n      padding: 2px;\r\n      line-height: 1;\r\n      font-size: $font-size-12;\r\n      color: $color-text-999;\r\n\r\n      &.current {\r\n        color: $color-qq-theme;\r\n      }\r\n    }\r\n  }\r\n\r\n  .list-fixed-title-warp {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    height: 30px;\r\n    line-height: 30px;\r\n    padding: 5px 0 5px 20px;\r\n    box-shadow: 0 1px 0 #eee;\r\n    color: $color-qq-theme;\r\n    font-size: $font-size-18 = 18px;\r\n    background-color: $color-background-f7f7f7;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/base/listView/ListView.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('scroll',{ref:\"listview\",staticClass:\"list-view\",attrs:{\"data\":_vm.data,\"listenScroll\":_vm.listenScroll,\"probeType\":_vm.probeType},on:{\"scroll\":_vm.scroll}},[_c('ul',_vm._l((_vm.data),function(item){return _c('li',{key:item.title,ref:\"listGroup\",refInFor:true,staticClass:\"list-group\"},[_c('h2',{staticClass:\"list-group-title\"},[_vm._v(_vm._s(item.title))]),_vm._v(\" \"),_c('ul',_vm._l((item.singers),function(singer){return _c('li',{key:singer.id,staticClass:\"list-group-item\",on:{\"click\":function($event){_vm.selectItem(singer)}}},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(singer.avatar),expression:\"singer.avatar\"}],staticClass:\"avatar\",attrs:{\"alt\":\"歌手\"}}),_vm._v(\" \"),_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(singer.name))])])}))])})),_vm._v(\" \"),_c('div',{staticClass:\"shortcut-list\"},[_c('ul',{on:{\"touchmove\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.onShortcutTouchMove($event)}}},_vm._l((_vm.shortcutList),function(item,index){return _c('li',{key:index,staticClass:\"item\",class:{current: _vm.currentIndex === index},on:{\"touchstart\":function($event){_vm.onShortcutTouchStart(index)}}},[_vm._v(_vm._s(item))])}))]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.fixedTitle),expression:\"fixedTitle\"}],ref:\"fixed\",staticClass:\"list-fixed-title-warp\"},[_c('h2',{staticClass:\"list-fixed-title\"},[_vm._v(_vm._s(_vm.fixedTitle))])]),_vm._v(\" \"),_c('loading',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.data.length),expression:\"!data.length\"}]})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6945c92c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/base/listView/ListView.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6945c92c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ListView.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ListView.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ListView.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6945c92c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ListView.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6945c92c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/base/listView/ListView.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"singer\">\r\n    <list-view :data=\"singerList\" @selectItem=\"gotoSingerDetail\"></list-view>\r\n    <router-view></router-view>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/javascript\">\r\nimport { getSingerList } from 'api/singer'\r\nimport { ERR_OK } from 'api/config'\r\nimport { mapMutations } from 'vuex'\r\nimport Singer, { HOT_NAME, HOT_SINGER_LENGTH } from 'common/js/singer'\r\nimport ListView from 'base/listView/ListView'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      singerList: []\r\n    }\r\n  },\r\n  components: {\r\n    ListView\r\n  },\r\n  created() {\r\n    this._getsingerList()\r\n  },\r\n  methods: {\r\n    // 跳转到歌手详情页\r\n    gotoSingerDetail(singer) {\r\n      this.$router.push({\r\n        path: `/singer/${singer.id}`\r\n      })\r\n      this.setSinger(singer)\r\n    },\r\n    _getsingerList() {\r\n      getSingerList()\r\n        .then(res => {\r\n          if (res.code === ERR_OK) {\r\n            this.singerList = this._normalizeSingerList(res.data.list)\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.log(error)\r\n        })\r\n    },\r\n    // 按照 A-Z 字母分类，格式化歌手列表数据\r\n    _normalizeSingerList(list) {\r\n      // 1. 定义一个对象\r\n      let map = {\r\n        hot: {\r\n          title: HOT_NAME,\r\n          singers: []\r\n        }\r\n      }\r\n\r\n      // 2. 遍历传入的 list 数据\r\n      list.forEach((ele, index) => {\r\n        // 2.1 按照 HOT_SINGER_LENGTH 的长度，取出作为热门数据，push 到  hot 中\r\n        if (index < HOT_SINGER_LENGTH) {\r\n          map.hot.singers.push(\r\n            new Singer({\r\n              name: ele.Fsinger_name,\r\n              id: ele.Fsinger_mid\r\n            })\r\n          )\r\n        }\r\n        // 2.2 按照字母，把数据存入 singers 中\r\n        const key = ele.Findex\r\n        if (!map[key]) {\r\n          map[key] = {\r\n            title: key,\r\n            singers: []\r\n          }\r\n        }\r\n        map[key].singers.push(\r\n          new Singer({\r\n            name: ele.Fsinger_name,\r\n            id: ele.Fsinger_mid\r\n          })\r\n        )\r\n      })\r\n\r\n      // 3. 把格式化后的数据进行排序处理\r\n      let ret = [] // 所有数据\r\n      let hot = [] // 热门数据\r\n\r\n      // 3.1 遍历格式化后的数据 map\r\n      for (let key in map) {\r\n        let singer = map[key]\r\n        if (singer.title.match(/[a-zA-Z]/)) {\r\n          ret.push(singer)\r\n        } else if (singer.title === HOT_NAME) {\r\n          hot.push(singer)\r\n        }\r\n      }\r\n\r\n      // 3.2 对数据进行排序\r\n      ret.sort((a, b) => {\r\n        return a.title.charCodeAt(0) - b.title.charCodeAt(0)\r\n      })\r\n\r\n      return hot.concat(ret)\r\n    },\r\n    ...mapMutations({\r\n      setSinger: 'SET_SINGER'\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.singer {\r\n  position: absolute;\r\n  top: 81px;\r\n  bottom: 0;\r\n  width: 100%;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/singer/Singer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"singer\"},[_c('list-view',{attrs:{\"data\":_vm.singerList},on:{\"selectItem\":_vm.gotoSingerDetail}}),_vm._v(\" \"),_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-34339984\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/singer/Singer.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-34339984\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Singer.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Singer.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Singer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-34339984\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Singer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-34339984\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/singer/Singer.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"loading\">\r\n    <img width=\"24\" height=\"24\" src=\"~common/images/default.gif\" alt=\"loading\">\r\n    <p class=\"desc\">{{title}}</p>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/javascript\">\r\nexport default {\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: '正在加载...'\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n@import '~common/styles/mixin'\r\n@import '~common/styles/variable'\r\n\r\n  .loading\r\n    center()\r\n    text-align center\r\n    // background-color red\r\n    .desc\r\n      line-height 20px\r\n      font-size $font-size-14\r\n      color $color-qq-theme = #31c27c\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/base/loading/Loading.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"loading\"},[_c('img',{attrs:{\"width\":\"24\",\"height\":\"24\",\"src\":require(\"common/images/default.gif\"),\"alt\":\"loading\"}}),_vm._v(\" \"),_c('p',{staticClass:\"desc\"},[_vm._v(_vm._s(_vm.title))])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-313af827\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/base/loading/Loading.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-313af827\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Loading.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Loading.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Loading.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-313af827\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Loading.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-313af827\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/base/loading/Loading.vue\n// module id = null\n// module chunks = ","import jsonp from 'common/js/jsonp'\r\nimport { commonParams, options } from './config'\r\n\r\nexport const getSingerList = () => {\r\n  const url = 'https://c.y.qq.com/v8/fcg-bin/v8.fcg'\r\n  const data = Object.assign({}, commonParams, {\r\n    channel: 'singer',\r\n    page: 'list',\r\n    key: 'all_all_all',\r\n    pagesize: 100,\r\n    pagenum: 1,\r\n    hostUin: 0,\r\n    needNewCode: 0,\r\n    platform: 'yqq'\r\n  })\r\n\r\n  return jsonp(url, data, options)\r\n}\r\n\r\nexport const getSingerDetail = singerId => {\r\n  const url = 'https://c.y.qq.com/v8/fcg-bin/fcg_v8_singer_track_cp.fcg'\r\n  const data = Object.assign({}, commonParams, {\r\n    loginUin: 0,\r\n    hostUin: 0,\r\n    format: 'jsonp',\r\n    platform: 'yqq',\r\n    needNewCode: 0,\r\n    singermid: singerId,\r\n    order: 'listen',\r\n    begin: 0,\r\n    num: 30,\r\n    songstatus: 1\r\n  })\r\n\r\n  return jsonp(url, data, options)\r\n}\r\n\r\n// export const getSongVkey = songmid => {\r\n//   const url = 'https://c.y.qq.com/base/fcgi-bin/fcg_music_express_mobile3.fcg'\r\n//   const data = Object.assign(\r\n//     {},\r\n//     {\r\n//       callback: 'musicJsonCallback',\r\n//       loginUin: 0,\r\n//       format: 'jsonp',\r\n//       platform: 'yqq',\r\n//       needNewCode: 0,\r\n//       cid: 205361747,\r\n//       uin: 3051522991,\r\n//       guid: 5931742855,\r\n//       songmid: songmid,\r\n//       filename: `C400${songmid}.m4a`\r\n//     }\r\n//   )\r\n//   return jsonp(url, data, options)\r\n// }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/singer.js","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/classCallCheck.js\n// module id = Zrlr\n// module chunks = 2 3"],"sourceRoot":""}