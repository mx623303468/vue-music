webpackJsonp([2],{Dd8w:function(t,e,i){"use strict";e.__esModule=!0;var n,s=i("woOf"),r=(n=s)&&n.__esModule?n:{default:n};e.default=r.default||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}},H6oc:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("Dd8w"),s=i.n(n),r=i("Sgn/"),a=i("T452"),o=i("NYxO"),c=i("Zrlr"),l=i.n(c),u=function t(e){var i=e.id,n=e.name;l()(this,t),this.id=i,this.name=n,this.avatar="https://y.gtimg.cn/music/photo_new/T001R300x300M000"+i+".jpg?max_age=2592000"},h=i("5Fyp"),f=i("OmhB"),d={data:function(){return{touches:{},listHeight:[],currentIndex:0,scrollY:-1,diff:-1}},props:{data:{type:Array,default:function(){return[]}}},computed:{shortcutList:function(){return this.data.map(function(t){return t.title.substr(0,1)})},fixedTitle:function(){return this.scrollY>0?"":this.data[this.currentIndex]?this.data[this.currentIndex].title:""}},watch:{data:function(){var t=this;setTimeout(function(){t._calculateHeight()},20)},scrollY:function(t){var e=this.listHeight;if(t>0)this.currentIndex=0;else{for(var i=0;i<e.length-1;i++){var n=e[i],s=e[i+1];if(-t>=n&&-t<s)return this.currentIndex=i,void(this.diff=s+t)}this.currentIndex=e.length-2}},diff:function(t){var e=t>0&&t<40?t-40:0;this.$refs.fixed.style.transform="translate3d(0, "+e+"px, 0)"}},components:{scroll:h.a,loading:f.a},created:function(){var t=this;this.listenScroll=!0,this.probeType=3,setTimeout(function(){t._calculateHeight()},20)},methods:{selectItem:function(t){this.$emit("selectItem",t)},onShortcutTouchStart:function(t){var e=window.event.touches[0].pageY;this.touches.stratTouch=e,this.touches.stratIndex=t,this._scrollToElement(t),this.currentIndex=t},onShortcutTouchMove:function(t){var e=t.touches[0];this.touches.endTouch=e.pageY;var i=(this.touches.endTouch-this.touches.stratTouch)/16|0,n=parseInt(this.touches.stratIndex)+i;this._scrollToElement(n),n<0?this.currentIndex=0:n>this.listHeight.length-2?this.currentIndex=this.listHeight.length-2:this.currentIndex=n},_scrollToElement:function(t){this.$refs.listview.scrollToElement(this.$refs.listGroup[t],0)},_calculateHeight:function(){this.listHeight=[];var t=[];this.$refs.listGroup&&(t=this.$refs.listGroup.map(function(t){return t.clientHeight}));var e=0;this.listHeight.push(e);for(var i=0;i<t.length;i++)e+=t[i],this.listHeight.push(e)},scroll:function(t){this.scrollY=t.y}}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("scroll",{ref:"listview",staticClass:"list-view",attrs:{data:t.data,listenScroll:t.listenScroll,probeType:t.probeType},on:{scroll:t.scroll}},[i("ul",t._l(t.data,function(e){return i("li",{key:e.title,ref:"listGroup",refInFor:!0,staticClass:"list-group"},[i("h2",{staticClass:"list-group-title"},[t._v(t._s(e.title))]),t._v(" "),i("ul",t._l(e.singers,function(e){return i("li",{key:e.id,staticClass:"list-group-item",on:{click:function(i){t.selectItem(e)}}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.avatar,expression:"singer.avatar"}],staticClass:"avatar",attrs:{alt:"歌手"}}),t._v(" "),i("span",{staticClass:"name"},[t._v(t._s(e.name))])])}))])})),t._v(" "),i("div",{staticClass:"shortcut-list"},[i("ul",{on:{touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.onShortcutTouchMove(e)}}},t._l(t.shortcutList,function(e,n){return i("li",{key:n,staticClass:"item",class:{current:t.currentIndex===n},on:{touchstart:function(e){t.onShortcutTouchStart(n)}}},[t._v(t._s(e))])}))]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.fixedTitle,expression:"fixedTitle"}],ref:"fixed",staticClass:"list-fixed-title-warp"},[i("h2",{staticClass:"list-fixed-title"},[t._v(t._s(t.fixedTitle))])]),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:!t.data.length,expression:"!data.length"}]})],1)},staticRenderFns:[]};var g={data:function(){return{singerList:[]}},components:{ListView:i("VU/8")(d,v,!1,function(t){i("hyoX")},"data-v-6945c92c",null).exports},created:function(){this._getsingerList()},methods:s()({gotoSingerDetail:function(t){this.$router.push({path:"/singer/"+t.id}),this.setSinger(t)},_getsingerList:function(){var t=this;Object(r.b)().then(function(e){e.code===a.a&&(t.singerList=t._normalizeSingerList(e.data.list))}).catch(function(t){console.log(t)})},_normalizeSingerList:function(t){var e={hot:{title:"热门",singers:[]}};t.forEach(function(t,i){i<10&&e.hot.singers.push(new u({name:t.Fsinger_name,id:t.Fsinger_mid}));var n=t.Findex;e[n]||(e[n]={title:n,singers:[]}),e[n].singers.push(new u({name:t.Fsinger_name,id:t.Fsinger_mid}))});var i=[],n=[];for(var s in e){var r=e[s];r.title.match(/[a-zA-Z]/)?i.push(r):"热门"===r.title&&n.push(r)}return i.sort(function(t,e){return t.title.charCodeAt(0)-e.title.charCodeAt(0)}),n.concat(i)}},Object(o.c)({setSinger:"SET_SINGER"}))},p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"singer"},[e("list-view",{attrs:{data:this.singerList},on:{selectItem:this.gotoSingerDetail}}),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var m=i("VU/8")(g,p,!1,function(t){i("W+Iq")},"data-v-34339984",null);e.default=m.exports},L95d:function(t,e){},OmhB:function(t,e,i){"use strict";var n={props:{title:{type:String,default:"正在加载..."}}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loading"},[e("img",{attrs:{width:"24",height:"24",src:i("OnQf"),alt:"loading"}}),this._v(" "),e("p",{staticClass:"desc"},[this._v(this._s(this.title))])])},staticRenderFns:[]};var r=i("VU/8")(n,s,!1,function(t){i("L95d")},"data-v-313af827",null);e.a=r.exports},"Sgn/":function(t,e,i){"use strict";i.d(e,"b",function(){return o}),i.d(e,"a",function(){return c});var n=i("woOf"),s=i.n(n),r=i("Gak4"),a=i("T452"),o=function(){var t=s()({},a.b,{channel:"singer",page:"list",key:"all_all_all",pagesize:100,pagenum:1,hostUin:0,needNewCode:0,platform:"yqq"});return Object(r.a)("https://c.y.qq.com/v8/fcg-bin/v8.fcg",t,a.c)},c=function(t){var e=s()({},a.b,{loginUin:0,hostUin:0,format:"jsonp",platform:"yqq",needNewCode:0,singermid:t,order:"listen",begin:0,num:30,songstatus:1});return Object(r.a)("https://c.y.qq.com/v8/fcg-bin/fcg_v8_singer_track_cp.fcg",e,a.c)}},"W+Iq":function(t,e){},Zrlr:function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},hyoX:function(t,e){}});
//# sourceMappingURL=2.091eedd4fc0ca96fb168.js.map